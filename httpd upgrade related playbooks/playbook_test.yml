---
  - name: modify httpd.conf contents
    hosts: "{{ specific_host }}"
    gather_facts: no
    become: yes

    tasks:
      - name: Download new apache tomcat version
        get_url: 
          url: https://archive.apache.org/dist/tomcat/tomcat-9/{{tomcat_installer}}.tar.gz
          dest: /opt/source/
          validate_certs: no
        register: tomcat_download

      - name: Display tomcat_download
        debug:
          var: tomcat_download

      - name: Extract tomcat
        unarchive:
          src: "{{ tomcat_download.dest }}"
          dest: /opt/source/
          remote_src: yes
        register: tomcat_extracted

      - name: Display tomcat_extracted
        debug:
          var: tomcat_extracted

      - name: Formating tomcat tomcat name
        set_fact:
          tomcat_directory_name: "{{ tomcat_extracted.src | basename | regex_replace('\\.tar\\.gz$', '') }}"

      - name: Display tomcat directory name
        debug:
          var: tomcat_directory_name
